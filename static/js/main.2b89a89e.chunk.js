(this["webpackJsonpavb-test"]=this["webpackJsonpavb-test"]||[]).push([[0],{14:function(t,e,a){},16:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),r=a(9),s=a.n(r),o=(a(14),a(2)),i=a.n(o),l=a(5),u=a(4),f=a(3);a(16);function p(t,e){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(i.a.mark((function t(e,a){var n,c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/paginated?itemsPerPage=".concat(a,"&page=").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow"}).then((function(t){return t.json()})).catch((function(t){return console.error("ERROR: ",t)}));case 2:return n=t.sent,r=(c=n||{}).contacts,s=c.totalItems,t.abrupt("return",{contacts:r,totalItems:s});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(i.a.mark((function t(e){var a,n,c,r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(e),{method:"GET",redirect:"follow"}).then((function(t){return t.json()})).catch((function(t){return console.error("ERROR: ",t)}));case 2:return a=t.sent,c=(n=a||{}).id,r=n.firstName,s=n.lastName,o=n.emails,t.abrupt("return",{id:c,firstName:r,lastName:s,emails:o});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t,e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(i.a.mark((function t(e,a){var n,c,r,s,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(a)}).then((function(t){return t.json()})).catch((function(t){console.error("ERROR: ",t)}));case 2:return n=t.sent,r=(c=n||{}).id,s=c.firstName,o=c.lastName,l=c.emails,t.abrupt("return",{id:r,firstName:s,lastName:o,emails:l});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(e),{method:"DELETE",redirect:"follow"}).then((function(t){return t.status})).catch((function(t){return console.error("ERROR: ",t)}));case 2:return a=t.sent,t.abrupt("return",200===a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark((function t(e){var a,n,c,r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",body:JSON.stringify(e)}).then((function(t){return t.json()})).catch((function(t){return console.error("ERROR: ",t)}));case 2:return a=t.sent,c=(n=a||{}).id,r=n.firstName,s=n.lastName,o=n.emails,t.abrupt("return",{id:c,firstName:r,lastName:s,emails:o});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N=a(0);function g(t){var e=t.className;return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 20 20",fill:"#FF5757",children:Object(N.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}function y(t){var e=t.className;return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 20 20",fill:"#579AFF",children:Object(N.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})}function C(t){var e=t.contact,a=t.selectContact,n=t.className;return Object(N.jsx)("div",{className:"".concat(n," cursor-pointer"),onClick:function(){return a(e.id)},children:Object(N.jsx)("p",{className:"select-none whitespace-nowrap",children:e.firstName+" "+e.lastName})})}function k(t){var e=t.contacts,a=t.selectContact,c=t.selectedId,r=(t.loading,t.className),s=Object(n.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(n.useState)([]),d=Object(f.a)(p,2),b=d[0],m=d[1];return Object(n.useEffect)((function(){!function(){var t=i.split(" ").filter(Boolean);m(Object(l.a)(t))}()}),[i]),Object(N.jsxs)("div",{className:"".concat(r," bg-light text-left flex flex-col py-2"),children:[Object(N.jsxs)("div",{className:"flex justify-between align-baseline px-3 py-2",children:[Object(N.jsx)("p",{className:"text-4xl opacity-80 font-light",children:"Contacts"}),Object(N.jsx)("button",{title:"Add new contact",onClick:function(){return a(null)},children:Object(N.jsx)(y,{className:"h-10"})})]}),Object(N.jsx)("div",{className:"flex p-2",children:Object(N.jsx)("input",{className:"w-full py-1 px-2 border border-input focus:border-primary outline-none",type:"text",value:i,placeholder:"search",onChange:function(t){return u(t.target.value)},onFocus:function(t){return t.target.select()}})}),Object(N.jsx)("ul",{className:"overflow-y-auto h-full",children:e.filter((function(t){return b.every((function(e){return(t.firstName+" "+t.lastName).toLowerCase().includes(e.toLowerCase())}))})).map((function(t){return Object(N.jsx)(C,{className:"".concat(t.id===c?"bg-primary text-white":"hover:bg-blue-100"," px-3 py-2 new-row-animated"),selectContact:function(t){return a(t)},contact:t},t.id)}))})]})}var R=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/;function S(t){var e=t.trim();return e.replace(/\s{2,}/," "),0===e.length?(alert("Cannot save contact: first and last name cannot be empty."),!1):e.match(/[^\w\d\s]/)?(alert("Cannot save contact: name can only contain alphanumeric and white space characters."),!1):e.length>32?(alert("Cannot save contact: first or last name cannot be longer than 32 characters."),!1):e}function E(t){var e=t.trim();return""===t?(alert("Cannot save contact: email address cannot be empty."),!1):e.match(R)?e:(alert("Cannot save contact: invalid email address."),!1)}function z(t){var e=t.contact,a=t.deleteContact,c=t.saveChanges,r=t.className,s=Object(n.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(n.useState)(""),d=Object(f.a)(p,2),b=d[0],m=d[1],x=Object(n.useState)([]),h=Object(f.a)(x,2),j=h[0],v=h[1],O=Object(n.useState)(!1),w=Object(f.a)(O,2),C=w[0],k=w[1];function R(){u(e.firstName),m(e.lastName),v(Object(l.a)(e.emails)),k(!(null===e||void 0===e?void 0:e.id))}function z(){var t=S(i);if(t){var e=S(b);if(e){var a=function(t){for(var e=[],a=0;a<t.length;a++){var n=E(t[a]);if(!n)return!1;e.push(n)}for(var c=0;c<e.length-1;c++)for(var r=c+1;r<e.length;r++)if(e[c].toUpperCase()===e[r].toUpperCase())return alert("Cannot save contact: email address "+e[c]+" already exists for this contact."),!1;return e}(j);a&&t&&e&&a&&c({firstName:t,lastName:e,emails:a})}}}return Object(n.useEffect)((function(){R()}),[e]),Object(N.jsxs)("div",{className:"".concat(r," flex flex-col justify-between gap-12 p-6 pt-10 bg-white overflow-y-auto"),children:[Object(N.jsxs)("div",{className:"space-y-4",children:[Object(N.jsxs)("div",{className:"flex flex-row gap-4",children:[Object(N.jsxs)("div",{className:"flex flex-col items-start w-1/2",children:[Object(N.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-firstname",children:"First Name"}),Object(N.jsx)("input",{maxLength:32,id:"contact-firstname",type:"text",value:i,onChange:function(t){return u(t.target.value)},disabled:!C,className:"transition-all w-full border ".concat(C?"border-input bg-light focus:border-primary":"border-transparent bg-transparent"," px-2 py-1 text-lg outline-none")})]}),Object(N.jsxs)("div",{className:"flex flex-col items-start w-1/2",children:[Object(N.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-lastname",children:"Last Name"}),Object(N.jsx)("input",{maxLength:32,id:"contact-lastname",type:"text",value:b,onChange:function(t){return m(t.target.value)},disabled:!C,className:"transition-all w-full border border-input ".concat(C?"border-opacity-100 bg-light focus:border-primary":"border-opacity-0 bg-white"," px-2 py-1 text-lg outline-none")})]})]}),Object(N.jsxs)("div",{className:"flex flex-col items-start",children:[Object(N.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-emails",children:"Emails"}),Object(N.jsxs)("ul",{className:"flex flex-col gap-1",id:"contact-emails",children:[null===j||void 0===j?void 0:j.map((function(t,e){return Object(N.jsxs)("li",{className:"flex flex-row items-end",children:[Object(N.jsx)("button",{title:"Delete email",disabled:!C,className:"absolute transition-all transform ".concat(C?"scale-100":" scale-0 opacity-0 select-none"," place-self-center"),onClick:function(){!function(t){var e=j;e.splice(t,1),v(Object(l.a)(e))}(e)},children:Object(N.jsx)(g,{className:"h-7"})}),Object(N.jsx)("input",{type:"text",value:j[e],onChange:function(t){return function(t,e){var a=j;a[t]=e,v(Object(l.a)(a))}(e,t.target.value)},disabled:!C,className:"transition-all transform w-full border ".concat(C?" translate-x-8 border-input bg-light focus:border-primary":"border-transparent bg-transparent"," px-2 py-1 text-lg outline-none")},e.toString())]},e)})),Object(N.jsxs)("button",{title:"Add new email",disabled:!C,className:"transition-all transform ".concat(C?"":"opacity-0 cursor-default select-none"," flex flex-row h-10 py-1 items-center text-primary mt-2"),onClick:function(){v(j.concat(""))},children:[Object(N.jsx)(y,{className:"h-7 mr-1"}),"add email"]})]})]})]}),Object(N.jsxs)("div",{className:"flex justify-between",children:[Object(N.jsx)("button",{title:"Delete contact",className:"border border-danger bg-danger text-white p-1 w-24 ",onClick:a,children:"Delete"}),Object(N.jsxs)("div",{className:"space-x-6",children:[C?Object(N.jsx)("button",{title:"Cancel changes",className:"border bg-white border-primary p-1 w-24",onClick:e.id?R:a,children:"Cancel"}):null,Object(N.jsx)("button",{title:"Save changes",className:"border border-primary bg-primary text-white p-1 w-24",onClick:function(){C?z():k(!C)},children:C?"Save":"Edit"})]})]})]})}var F=function(){var t=Object(n.useState)([]),e=Object(f.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(null),s=Object(f.a)(r,2),o=s[0],d=s[1],m=Object(n.useState)(!1),h=Object(f.a)(m,2),v=h[0],w=h[1];function g(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(i.a.mark((function t(){var e,a,n,r,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=1,a=20,n=[],t.next=4,p(e,a);case 4:r=t.sent,s=r.contacts,o=r.totalItems,n.push.apply(n,Object(l.a)(s));case 8:if(!(o&&e*a<o)){t.next=18;break}return e++,t.next=12,p(e,a);case 12:u=t.sent,s=u.contacts,o=u.totalItems,n.push.apply(n,Object(l.a)(s)),t.next=8;break;case 18:n.sort((function(t,e){var a=t.firstName.concat(t.lastName),n=e.firstName.concat(e.lastName);return a.toUpperCase()>n.toUpperCase()?1:-1})),c(n);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(!0),!e){t.next=7;break}return t.next=4,b(e);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0={firstName:"",lastName:"",emails:[]};case 8:a=t.t0,d(a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.id){t.next=7;break}if(!window.confirm("Do you wish to delete "+o.firstName+" "+o.lastName+" from your contact list?")){t.next=6;break}return t.next=4,j(o.id);case 4:t.next=7;break;case 6:return t.abrupt("return");case 7:d(null),g();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,x(e.id,e);case 3:t.next=10;break;case 5:return t.t0=d,t.next=8,O(e);case 8:t.t1=t.sent,(0,t.t0)(t.t1);case 10:g();case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){g()}),[]),Object(n.useEffect)((function(){w(!1)}),[o]),Object(N.jsx)("div",{className:"App w-screen h-screen p-32 bg-gradient-to-t from-indigo-500 to-indigo-400",children:Object(N.jsxs)("div",{className:"bg-white flex flex-row min-w-min mx-auto max-w-5xl h-full max-h-full shadow-2xl",children:[Object(N.jsx)(k,{className:"w-56",contacts:a,selectContact:function(t){return C.apply(this,arguments)},selectedId:null===o||void 0===o?void 0:o.id}),!v&&o?Object(N.jsx)(z,{className:"flex-grow",contact:o,saveChanges:function(t){return S.apply(this,arguments)},deleteContact:function(){return R.apply(this,arguments)}}):Object(N.jsx)("div",{className:"flex-grow text-center place-self-center",children:v?"Loading...":"Select a contact or create a new one. "})]})})},T=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),r(t),s(t)}))};s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(F,{})}),document.getElementById("root")),T()}},[[18,1,2]]]);
//# sourceMappingURL=main.2b89a89e.chunk.js.map