(this["webpackJsonpavb-test"]=this["webpackJsonpavb-test"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(9),s=a.n(r),o=(a(14),a(2)),i=a.n(o),l=a(5),u=a(4),f=a(3);a(16);function p(e,t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(i.a.mark((function e(t,a){var n,c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/paginated?itemsPerPage=".concat(a,"&page=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.error("ERROR: ",e)}));case 2:return n=e.sent,r=(c=n||{}).contacts,s=c.totalItems,e.abrupt("return",{contacts:r,totalItems:s});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(t){var a,n,c,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(t),{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.error("ERROR: ",e)}));case 2:return a=e.sent,c=(n=a||{}).id,r=n.firstName,s=n.lastName,o=n.emails,e.abrupt("return",{id:c,firstName:r,lastName:s,emails:o});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(i.a.mark((function e(t,a){var n,c,r,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.error("ERROR: ",e)}));case 2:return n=e.sent,r=(c=n||{}).id,s=c.firstName,o=c.lastName,l=c.emails,e.abrupt("return",{id:r,firstName:s,lastName:o,emails:l});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts/".concat(t),{method:"DELETE",redirect:"follow"}).then((function(e){return e.status})).catch((function(e){return console.error("ERROR: ",e)}));case 2:return a=e.sent,e.abrupt("return",200===a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark((function e(t){var a,n,c,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://avb-contacts-api.herokuapp.com/contacts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.error("ERROR: ",e)}));case 2:return a=e.sent,c=(n=a||{}).id,r=n.firstName,s=n.lastName,o=n.emails,e.abrupt("return",{id:c,firstName:r,lastName:s,emails:o});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=a(0);function N(e){var t=e.className;return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"#FF5757",children:Object(g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}function y(e){var t=e.className;return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"#579AFF",children:Object(g.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})}function C(e){var t=e.contact,a=e.selectContact,n=e.className;return Object(g.jsx)("div",{className:"".concat(n," cursor-pointer"),onClick:function(){return a(t.id)},children:Object(g.jsx)("p",{className:"select-none whitespace-nowrap",children:t.firstName+" "+t.lastName})})}function k(e){var t=e.contacts,a=e.selectContact,c=e.selectedId,r=(e.loading,e.className),s=Object(n.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(n.useState)([]),d=Object(f.a)(p,2),b=d[0],x=d[1];return Object(n.useEffect)((function(){!function(){var e=i.split(" ").filter(Boolean);x(Object(l.a)(e))}()}),[i]),Object(g.jsxs)("div",{className:"".concat(r," bg-light text-left flex flex-col py-2"),children:[Object(g.jsxs)("div",{className:"flex justify-between align-baseline px-3 py-2",children:[Object(g.jsx)("p",{className:"text-4xl opacity-80 font-light",children:"Contacts"}),Object(g.jsx)("button",{title:"Add new contact",onClick:function(){return a(null)},children:Object(g.jsx)(y,{className:"h-10"})})]}),Object(g.jsx)("div",{className:"flex p-2",children:Object(g.jsx)("input",{className:"w-full py-1 px-2 border border-input focus:border-primary outline-none",type:"text",value:i,placeholder:"search",onChange:function(e){return u(e.target.value)},onFocus:function(e){return e.target.select()}})}),Object(g.jsx)("ul",{className:"overflow-y-auto h-full",children:t.filter((function(e){return b.every((function(t){return(e.firstName+" "+e.lastName).toLowerCase().includes(t.toLowerCase())}))})).map((function(e){return Object(g.jsx)(C,{className:"".concat(e.id===c?"bg-primary text-white":"hover:bg-blue-100"," px-3 py-2 new-row-animated"),selectContact:function(e){return a(e)},contact:e},e.id)}))})]})}var R=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/;function S(e){var t=e.trim();return t.replace(/\s{2,}/," "),0===t.length?(alert("Cannot save contact: first and last name cannot be empty."),!1):t.match(/[^\w\d\s]/)?(alert("Cannot save contact: name can only contain alphanumeric and white space characters."),!1):t.length>32?(alert("Cannot save contact: first or last name cannot be longer than 32 characters."),!1):t}function E(e){var t=e.trim();return t=t.toLowerCase(),""===e?(alert("Cannot save contact: email address cannot be empty."),!1):t.match(R)?t:(alert("Cannot save contact: invalid email address."),!1)}function z(e){var t=e.contact,a=e.deleteContact,c=e.saveChanges,r=e.className,s=Object(n.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(n.useState)(""),d=Object(f.a)(p,2),b=d[0],x=d[1],m=Object(n.useState)([]),h=Object(f.a)(m,2),j=h[0],v=h[1],O=Object(n.useState)(!1),w=Object(f.a)(O,2),C=w[0],k=w[1];function R(){u(t.firstName),x(t.lastName),v(Object(l.a)(t.emails)),k(!(null===t||void 0===t?void 0:t.id))}function z(){var e=S(i);if(e){var a=S(b);if(a){var n=function(e){for(var t=[],a=0;a<e.length;a++){var n=E(e[a]);if(!n)return!1;t.push(n)}for(var c=0;c<t.length-1;c++)for(var r=c+1;r<t.length;r++)if(t[c].toLowerCase()===t[r].toLowerCase())return alert("Cannot save contact: email address "+t[c]+" already exists for this contact."),!1;return t}(j);n&&e&&a&&n&&(c({firstName:e,lastName:a,emails:n,id:t.id}),k(!1))}}}return Object(n.useEffect)((function(){R()}),[t]),Object(g.jsxs)("div",{className:"".concat(r," flex flex-col justify-between gap-12 p-6 pt-10 bg-white overflow-y-auto"),children:[Object(g.jsxs)("div",{className:"space-y-4",children:[Object(g.jsxs)("div",{className:"flex flex-row gap-4",children:[Object(g.jsxs)("div",{className:"flex flex-col items-start w-1/2",children:[Object(g.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-firstname",children:"First Name"}),Object(g.jsx)("input",{maxLength:32,id:"contact-firstname",type:"text",value:i,onChange:function(e){return u(e.target.value)},disabled:!C,className:"transition-all w-full border ".concat(C?"border-input bg-light focus:border-primary":"border-transparent bg-transparent"," px-2 py-1 text-lg outline-none")})]}),Object(g.jsxs)("div",{className:"flex flex-col items-start w-1/2",children:[Object(g.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-lastname",children:"Last Name"}),Object(g.jsx)("input",{maxLength:32,id:"contact-lastname",type:"text",value:b,onChange:function(e){return x(e.target.value)},disabled:!C,className:"transition-all w-full border border-input ".concat(C?"border-opacity-100 bg-light focus:border-primary":"border-opacity-0 bg-white"," px-2 py-1 text-lg outline-none")})]})]}),Object(g.jsxs)("div",{className:"flex flex-col items-start",children:[Object(g.jsx)("label",{className:"text-sm mb-1 opacity-80",htmlFor:"contact-emails",children:"Emails"}),Object(g.jsxs)("ul",{className:"flex flex-col gap-1",id:"contact-emails",children:[null===j||void 0===j?void 0:j.map((function(e,t){return Object(g.jsxs)("li",{className:"flex flex-row items-end",children:[Object(g.jsx)("button",{title:"Delete email",disabled:!C,className:"absolute transition-all transform ".concat(C?"scale-100":" scale-0 opacity-0 select-none"," place-self-center"),onClick:function(){!function(e){var t=j;t.splice(e,1),v(Object(l.a)(t))}(t)},children:Object(g.jsx)(N,{className:"h-7"})}),Object(g.jsx)("input",{type:"text",value:j[t],onChange:function(e){return function(e,t){var a=j;a[e]=t,v(Object(l.a)(a))}(t,e.target.value)},disabled:!C,className:"transition-all transform w-full border ".concat(C?" translate-x-8 border-input bg-light focus:border-primary":"border-transparent bg-transparent"," px-2 py-1 text-lg outline-none")},t.toString())]},t)})),Object(g.jsxs)("button",{title:"Add new email",disabled:!C,className:"transition-all transform ".concat(C?"":"opacity-0 cursor-default select-none"," flex flex-row h-10 py-1 items-center text-primary mt-2"),onClick:function(){v(j.concat(""))},children:[Object(g.jsx)(y,{className:"h-7 mr-1"}),"add email"]})]})]})]}),Object(g.jsxs)("div",{className:"flex justify-between",children:[Object(g.jsx)("button",{title:"Delete contact",className:"border border-danger bg-danger text-white p-1 w-24 ",onClick:a,children:"Delete"}),Object(g.jsxs)("div",{className:"space-x-6",children:[C?Object(g.jsx)("button",{title:"Cancel changes",className:"border bg-white border-primary p-1 w-24",onClick:t.id?R:a,children:"Cancel"}):null,Object(g.jsx)("button",{title:"Save changes",className:"border border-primary bg-primary text-white p-1 w-24",onClick:function(){C?z():k(!C)},children:C?"Save":"Edit"})]})]})]})}var F=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),s=Object(f.a)(r,2),o=s[0],d=s[1],x=Object(n.useState)(!1),h=Object(f.a)(x,2),v=h[0],w=h[1];function N(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(i.a.mark((function e(){var t,a,n,r,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=1,a=20,n=[],e.next=4,p(t,a);case 4:r=e.sent,s=r.contacts,o=r.totalItems,n.push.apply(n,Object(l.a)(s));case 8:if(!(o&&t*a<o)){e.next=18;break}return t++,e.next=12,p(t,a);case 12:u=e.sent,s=u.contacts,o=u.totalItems,n.push.apply(n,Object(l.a)(s)),e.next=8;break;case 18:n.sort((function(e,t){var a=e.firstName.concat(e.lastName),n=t.firstName.concat(t.lastName);return a.toUpperCase()>n.toUpperCase()?1:-1})),c(n);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),!t){e.next=8;break}return e.next=4,b(t);case 4:(a=e.sent).id?d(a):alert("Cannot fetch data: contact no longer exists in database."),e.next=17;break;case 8:if(!t){e.next=14;break}return e.next=11,b(t);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0={firstName:"",lastName:"",emails:[]};case 15:n=e.t0,d(n);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.id){e.next=7;break}if(!window.confirm("Do you wish to delete "+o.firstName+" "+o.lastName+" from your contact list?")){e.next=6;break}return e.next=4,j(o.id);case 4:e.next=7;break;case 6:return e.abrupt("return");case 7:d(null),N();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=7;break}return e.next=3,m(t.id,t);case 3:e.sent.id||(alert("Cannot save changes: selected user no longer exists in database."),d(null)),e.next=12;break;case 7:return e.t0=d,e.next=10,O(t);case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:N();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){N(),setInterval((function(){N()}),5e3)}),[]),Object(n.useEffect)((function(){w(!1)}),[o]),Object(g.jsx)("div",{className:"App w-screen h-screen p-32 px-8 bg-gradient-to-t from-indigo-500 to-indigo-400",children:Object(g.jsxs)("div",{className:"bg-white flex flex-row min-w-min mx-auto max-w-5xl h-full max-h-full shadow-2xl",children:[Object(g.jsx)(k,{className:"w-56 flex-shrink-0 flex-grow-0",contacts:a,selectContact:function(e){return C.apply(this,arguments)},selectedId:null===o||void 0===o?void 0:o.id}),!v&&o?Object(g.jsx)(z,{className:"flex-grow",contact:o,saveChanges:function(e){return S.apply(this,arguments)},deleteContact:function(){return R.apply(this,arguments)}}):Object(g.jsx)("div",{className:"flex-grow text-center place-self-center",children:v?"Loading...":"Select a contact or create a new one. "})]})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root")),L()}},[[18,1,2]]]);
//# sourceMappingURL=main.e8d77829.chunk.js.map